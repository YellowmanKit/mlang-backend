{"version":3,"sources":["../../src/models/Profile.js"],"names":["ObjectId","mongoose","Schema","Types","profileSchema","belongTo","type","required","icon","String","name","default","description","joinedSchools","joinedCourses","cardCount","Number","featuredCount","Profile","module","exports","model","getStudents","coursesId","err","profiles","profilesId","find","$in","i","length","_id","getTeachers","schoolId"],"mappings":";;;;AAAA;;;;AACA;;;;;;;;;;AAEA,IAAIA,WAAWC,mBAASC,MAAT,CAAgBC,KAAhB,CAAsBH,QAArC;AACA,IAAII,gBAAgBH,mBAASC,MAAT,CAAgB;AAClCG,YAAU;AACRC,UAAMN,QADE;AAERO,cAAU;AAFF,GADwB;AAKlCC,QAAM;AACJF,UAAMG;AADF,GAL4B;AAQlCC,QAAM;AACJJ,UAAMG,MADF;AAEJE,aAAS;AAFL,GAR4B;AAYlCC,eAAa;AACXN,UAAMG,MADK;AAEXE,aAAS;AAFE,GAZqB;AAgBlCE,iBAAe,CAACb,QAAD,CAhBmB;AAiBlCc,iBAAe,CAACd,QAAD,CAjBmB;;AAmBlCe,aAAW;AACTT,UAAMU,MADG;AAETL,aAAS;AAFA,GAnBuB;AAuBlCM,iBAAe;AACbX,UAAMU,MADO;AAEbL,aAAS;AAFI;AAvBmB,CAAhB,CAApB;;AA6BA,IAAIO,UAAUC,OAAOC,OAAP,GAAiBnB,mBAASoB,KAAT,CAAe,SAAf,EAAyBjB,aAAzB,CAA/B;;AAEAe,OAAOC,OAAP,CAAeE,WAAf;AAAA,qEAA6B,iBAAOC,SAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACvBC,eADuB;AAEvBC,oBAFuB,GAEZ,EAFY;AAGvBC,sBAHuB,GAGV,EAHU;AAAA;AAAA,mBAKH,kBAAGR,QAAQS,IAAR,CAAa,EAAEb,eAAe,EAAEc,KAAKL,SAAP,EAAjB,EAAb,CAAH,CALG;;AAAA;AAAA;AAAA;AAK1BC,eAL0B;AAKrBC,oBALqB;;AAM3B,iBAAQI,CAAR,GAAU,CAAV,EAAYA,IAAEJ,SAASK,MAAvB,EAA8BD,GAA9B,EAAkC;AAChCH,wDAAiBA,UAAjB,IAA6BD,SAASI,CAAT,EAAYE,GAAzC;AACD;;AAR0B,6CAUpB,CAACP,GAAD,EAAMC,QAAN,EAAgBC,UAAhB,CAVoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA7B;;AAAA;AAAA;AAAA;AAAA;;AAaAP,OAAOC,OAAP,CAAeY,WAAf;AAAA,sEAA6B,kBAAOC,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACvBT,eADuB;AAEvBC,oBAFuB,GAEZ,EAFY;AAGvBC,sBAHuB,GAGV,EAHU;AAAA;AAAA,mBAKH,kBAAGR,QAAQS,IAAR,CAAa,EAAEd,eAAeoB,QAAjB,EAAb,CAAH,CALG;;AAAA;AAAA;AAAA;AAK1BT,eAL0B;AAKrBC,oBALqB;;AAM3B,iBAAQI,CAAR,GAAU,CAAV,EAAYA,IAAEJ,SAASK,MAAvB,EAA8BD,GAA9B,EAAkC;AAChCH,wDAAiBA,UAAjB,IAA6BD,SAASI,CAAT,EAAYE,GAAzC;AACD;;AAR0B,8CAUpB,CAACP,GAAD,EAAMC,QAAN,EAAgBC,UAAhB,CAVoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA7B;;AAAA;AAAA;AAAA;AAAA","file":"Profile.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport to from'../to';\r\n\r\nvar ObjectId = mongoose.Schema.Types.ObjectId;\r\nvar profileSchema = mongoose.Schema({\r\n  belongTo: {\r\n    type: ObjectId,\r\n    required: true\r\n  },\r\n  icon: {\r\n    type: String\r\n  },\r\n  name: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  description: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  joinedSchools: [ObjectId],\r\n  joinedCourses: [ObjectId],\r\n\r\n  cardCount: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  featuredCount: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\n\r\nvar Profile = module.exports = mongoose.model('profile',profileSchema);\r\n\r\nmodule.exports.getStudents = async (coursesId)=>{\r\n  let err;\r\n  let profiles = [];\r\n  let profilesId = [];\r\n\r\n  [err, profiles] = await to(Profile.find({ joinedCourses: { $in: coursesId } }) );\r\n  for(var i=0;i<profiles.length;i++){\r\n    profilesId = [...profilesId, profiles[i]._id];\r\n  }\r\n\r\n  return [err, profiles, profilesId];\r\n}\r\n\r\nmodule.exports.getTeachers = async (schoolId)=>{\r\n  let err;\r\n  let profiles = [];\r\n  let profilesId = [];\r\n\r\n  [err, profiles] = await to(Profile.find({ joinedSchools: schoolId }) );\r\n  for(var i=0;i<profiles.length;i++){\r\n    profilesId = [...profilesId, profiles[i]._id];\r\n  }\r\n\r\n  return [err, profiles, profilesId];\r\n}\r\n"]}